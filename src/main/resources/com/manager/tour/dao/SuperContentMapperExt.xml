<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.manager.tour.dao.SuperContentMapper">
  <select id="selectPage" resultMap="PageResultMap">
    select SC01_ID, SUPER_P_NO, SYS_NO, SUPER_P_CHECK, SUPER_P_EXP, SUPER_P_SCORE,
    STATUS from SC01 where DELETE_FLAG = '0'
    <if test="query != null">
      <if test="query.superPNo != null and query.superPNo.trim() != ''">
        and SUPER_P_NO like concat('%', #{query.superPNo,jdbcType=VARCHAR}, '%')
      </if>
      <if test="query.superPCheck != null and query.superPCheck.trim() != ''">
        and SUPER_P_CHECK like concat('%', #{query.superPCheck,jdbcType=VARCHAR}, '%')
      </if>
      <if test="query.status != null and query.status.trim() != ''">
        and STATUS = #{query.status,jdbcType=VARCHAR}
      </if>
    </if>
    order by SUPER_P_NO
  </select>

  <select id="selectLevel" resultMap="PageResultMap">
    select SC01_ID, SUPER_P_NO, SYS_NO, SUPER_P_CHECK, SUPER_P_EXP, SUPER_P_SCORE,
    STATUS from SC01 where DELETE_FLAG = '0'
      <if test="code != null and code.trim() != ''">
        and SUPER_P_NO like concat('', #{code,jdbcType=VARCHAR}, '%')
      </if>
      <if test="level != null and level.trim() != ''">
        and SUPER_P_LEVEL = #{level,jdbcType=VARCHAR}
      </if>
    order by SUPER_P_NO
  </select>

  <resultMap id="PageResultMap" type="com.manager.entry.tour.SuperContent">
    <id column="SC01_ID" property="sc01Id" jdbcType="VARCHAR"></id>
    <id column="SUPER_P_NO" property="superPNo" jdbcType="VARCHAR"></id>
    <id column="SYS_NO" property="sysNo" jdbcType="VARCHAR"></id>
    <id column="SUPER_P_CHECK" property="superPCheck" jdbcType="VARCHAR"></id>
    <id column="SUPER_P_EXP" property="superPExp" jdbcType="VARCHAR"></id>
    <id column="SUPER_P_SCORE" property="superPScore" jdbcType="VARCHAR"></id>
    <id column="STATUS" property="status" jdbcType="CHAR"></id>
  </resultMap>

  <select id="selectNextCode" resultType="String">
    select SUPER_P_NO from SC01 where SUPER_P_LEVEL = #{level,jdbcType=VARCHAR}
    <if test="code != null and code.trim() != ''">
      and SUPER_P_NO like concat('', #{code,jdbcType=VARCHAR}, '%')
    </if>
    order by SUPER_P_NO desc limit 1
  </select>

  <insert id="insertAll" parameterType="List">
    insert into SC01 (SC01_ID, SUPER_P_NO, SUPER_P_LEVEL, SYS_NO, SUPER_P_CHECK, SUPER_P_EXP, SUPER_P_SCORE,
    IF_ADD, ENABLE_TIME, DEACTI_TIME, STATUS, CREATE_USER, CREATE_TIME, UPDATE_USER,
    UPDATE_TIME, DELETE_FLAG) value
    <foreach collection="query" item="item" separator=",">
      (#{item.sc01Id,jdbcType=VARCHAR}, #{item.superPNo,jdbcType=VARCHAR}, #{item.superPLevel,jdbcType=VARCHAR},
      #{item.sysNo,jdbcType=VARCHAR}, #{item.superPCheck,jdbcType=VARCHAR}, #{item.superPExp,jdbcType=VARCHAR},
      #{item.superPScore,jdbcType=VARCHAR}, #{item.ifAdd,jdbcType=CHAR}, #{item.enableTime,jdbcType=DATE},
      #{item.deactiTime,jdbcType=DATE}, #{item.status,jdbcType=CHAR}, #{item.createUser,jdbcType=VARCHAR},
      #{item.createTime,jdbcType=TIMESTAMP}, #{item.updateUser,jdbcType=VARCHAR}, #{item.updateTime,jdbcType=TIMESTAMP},
      #{item.deleteFlag,jdbcType=CHAR})
    </foreach>
  </insert>

  <update id="updateAllStatus" parameterType="com.manager.entry.tour.SuperContentQuery">
    UPDATE SC01 SET STATUS = #{status,jdbcType=VARCHAR}
    where SC01_ID
    <foreach collection="ids" separator="," open="in(" close=")" item="id">
      #{id,jdbcType=VARCHAR}
    </foreach>
  </update>

</mapper>
