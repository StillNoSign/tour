<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.manager.tour.dao.ProjectContentMapper" >
  <insert id="insertAll" parameterType="com.manager.entry.tour.ProjectContent" >
    insert into SC0201 (SC0201_ID, PROJECT_NO, SUPER_P_NO,
      SUPER_P_LEVEL, SYS_NO, SUPER_P_CHECK,
      SUPER_P_EXP, SUPER_P_CONT, SUPER_P_SCORE,
      OP_UNIT, STATUS, SHOW_NO,
      IF_FILE, IF_PIC, IF_LINE, IF_DIST,
      SCORE, CREATE_USER, CREATE_TIME,
      UPDATE_USER, UPDATE_TIME, DELETE_FLAG
      )
    values
    <foreach collection="projectContents" item="projectContent" separator=",">
      (#{projectContent.sc0201Id,jdbcType=VARCHAR}, #{projectContent.projectNo,jdbcType=VARCHAR}, #{projectContent.superPNo,jdbcType=VARCHAR},
      #{projectContent.superPLevel,jdbcType=VARCHAR}, #{projectContent.sysNo,jdbcType=VARCHAR}, #{projectContent.superPCheck,jdbcType=VARCHAR},
      #{projectContent.superPExp,jdbcType=VARCHAR}, #{projectContent.superPCont,jdbcType=VARCHAR}, #{projectContent.superPScore,jdbcType=INTEGER},
      #{projectContent.opUnit,jdbcType=VARCHAR}, #{projectContent.status,jdbcType=CHAR}, #{projectContent.showNo,jdbcType=VARCHAR},
      #{projectContent.ifFile,jdbcType=CHAR}, #{projectContent.ifPic,jdbcType=CHAR}, #{projectContent.ifLine,jdbcType=CHAR}, #{projectContent.ifDist,jdbcType=CHAR},
      #{projectContent.score,jdbcType=INTEGER}, #{projectContent.createUser,jdbcType=VARCHAR}, #{projectContent.createTime,jdbcType=TIMESTAMP},
      #{projectContent.updateUser,jdbcType=VARCHAR}, #{projectContent.updateTime,jdbcType=TIMESTAMP}, #{projectContent.deleteFlag,jdbcType=CHAR}
      )
    </foreach>
  </insert>

  <select id="selectDetail" parameterType="String" resultMap="DetailResultMap">
        select t1.*,
           t2.SC020101_ID,
           t2.FILE_URL,
           t2.FILE_NAME,
           t2.FILE_NUM,
           t3.SC020102_ID,
           t3.APP_URL,
           t3.PIC_NAME,
           t3.PIC_NUM,
           t4.*,
           t5.*
        from SC0201 t1
               left join SC020101 t2 on t2.FILE_SOURCE = t1.SC0201_ID and t2.STATUS = '1' and t2.DELETE_FLAG = '0'
               left join SC020102 t3 on t3.PIC_SOURCE = t1.SC0201_ID and t3.STATUS = '1' and t3.DELETE_FLAG = '0'
               left join SC020103 t4 on t4.LINE_SOURCE = t1.SC0201_ID and t4.STATUS = '1' and t4.DELETE_FLAG = '0'
               left join SC020104 t5 on t5.DIST_SOURCE = t1.SC0201_ID and t5.STATUS = '1' and t5.DELETE_FLAG = '0'
        where t1.SC0201_ID = #{sc0201Id,jdbcType=VARCHAR} and t1.DELETE_FLAG = '0' order by t2.FILE_NUM, t3.PIC_NUM, t4.LINE_NUM, t5.DIST_NO
  </select>
  <resultMap id="DetailResultMap" type="com.manager.entry.tour.ProjectContent">
      <id column="SC0201_ID" jdbcType="VARCHAR" property="sc0201Id" />
      <result column="PROJECT_NO" jdbcType="VARCHAR" property="projectNo" />
      <result column="SUPER_P_NO" jdbcType="VARCHAR" property="superPNo" />
      <result column="SUPER_P_LEVEL" jdbcType="VARCHAR" property="superPLevel" />
      <result column="SYS_NO" jdbcType="VARCHAR" property="sysNo" />
      <result column="SUPER_P_CHECK" jdbcType="VARCHAR" property="superPCheck" />
      <result column="SUPER_P_EXP" jdbcType="VARCHAR" property="superPExp" />
      <result column="SUPER_P_CONT" jdbcType="VARCHAR" property="superPCont" />
      <result column="SUPER_P_SCORE" jdbcType="INTEGER" property="superPScore" />
      <result column="OP_UNIT" jdbcType="VARCHAR" property="opUnit" />
      <result column="STATUS" jdbcType="CHAR" property="status" />
      <result column="SHOW_NO" jdbcType="VARCHAR" property="showNo" />
      <result column="IF_FILE" jdbcType="CHAR" property="ifFile" />
      <result column="IF_PIC" jdbcType="CHAR" property="ifPic" />
      <result column="IF_LINE" jdbcType="CHAR" property="ifLine" />
      <result column="IF_DIST" jdbcType="CHAR" property="ifDist" />
      <result column="SCORE" jdbcType="INTEGER" property="score" />
      <collection property="imageShows" ofType="com.manager.entry.tour.ImageShow">
        <id column="SC020102_ID" jdbcType="VARCHAR" property="sc020102Id"/>
        <result column="PIC_NUM" jdbcType="VARCHAR" property="picNum"/>
        <result column="PIC_NAME" jdbcType="VARCHAR" property="picName"/>
        <result column="APP_URL" jdbcType="VARCHAR" property="appUrl"/>
      </collection>
      <collection property="documentShows" ofType="com.manager.entry.tour.DocumentShow">
        <id column="SC020101_ID" jdbcType="VARCHAR" property="sc020101Id"/>
        <result column="FILE_NUM" jdbcType="VARCHAR" property="fileNum"/>
        <result column="FILE_NAME" jdbcType="VARCHAR" property="fileName"/>
        <result column="FILE_URL" jdbcType="VARCHAR" property="fileUrl"/>
      </collection>
      <collection property="lineShows" ofType="com.manager.entry.tour.LineShow">
        <id column="SC020103_ID" property="sc020103Id" jdbcType="VARCHAR"/>
        <result column="LINE_NUM" property="lineNum" jdbcType="VARCHAR"/>
        <result column="LINE_NAME" property="lineName" jdbcType="VARCHAR"/>
        <result column="LINE_START_LONG" property="lineStartLong" jdbcType="INTEGER"/>
        <result column="LINE_START_LAT" property="lineStartLat" jdbcType="INTEGER"/>
        <result column="LINE_END_LONG" property="lineEndLong" jdbcType="INTEGER"/>
        <result column="LINE_END_LAT" property="lineEndLat" jdbcType="INTEGER"/>
      </collection>
      <collection property="regionShows" ofType="com.manager.entry.tour.RegionShow">
        <id column="SC020104_ID" jdbcType="VARCHAR" property="sc020104Id"/>
        <result column="DIST_NO" jdbcType="VARCHAR" property="distNo"/>
        <result column="DIST_CLASS" jdbcType="VARCHAR" property="distClass"/>
        <result column="DIST_SEC_CALSS" jdbcType="VARCHAR" property="distSecCalss"/>
        <result column="DIST_NAME" jdbcType="VARCHAR" property="distName"/>
        <result column="DIST_START_LONG" jdbcType="INTEGER" property="distStartLong"/>
        <result column="DIST_START_LAT" jdbcType="INTEGER" property="distStartLat"/>
        <result column="DIST_ADRES" jdbcType="VARCHAR" property="distAdres"/>
        <result column="DIST_PIC_URL" jdbcType="CHAR" property="distPicUrl"/>
        <result column="DIST_TEL" jdbcType="VARCHAR" property="distTel"/>
        <result column="DIST_EXP" jdbcType="VARCHAR" property="distExp"/>
      </collection>
  </resultMap>
</mapper>
